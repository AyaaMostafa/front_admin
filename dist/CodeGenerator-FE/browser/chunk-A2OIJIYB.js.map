{
  "version": 3,
  "sources": ["src/app/core/services/code-type-setting.service.ts", "src/app/features/code-settings/code-settings.component.ts", "src/app/features/code-settings/code-settings.component.html"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\n\r\nexport interface CodeTypeSettingRequest {\r\n    codeTypeId: number;\r\n    attributeDetailId: number;\r\n    sortOrder: number;\r\n    separator: string;\r\n    isRequired: boolean;\r\n}\r\n\r\nexport interface CodeTypeSettingResponse {\r\n    statusCode: number;\r\n    message: string;\r\n    data: {\r\n        id: number;\r\n        codeTypeId: number;\r\n        attributeDetailId: number;\r\n        sortOrder: number;\r\n        separator: string;\r\n        isRequired: boolean;\r\n        createdAt: string;\r\n    };\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class CodeTypeSettingService {\r\n    private apiUrl = environment.apiUrl;\r\n\r\n    constructor(private http: HttpClient) { }\r\n\r\n    createCodeTypeSetting(data: CodeTypeSettingRequest): Observable<CodeTypeSettingResponse> {\r\n        return this.http.post<CodeTypeSettingResponse>(\r\n            `${this.apiUrl}/CodeTypeSettings/Create`,\r\n            data\r\n        );\r\n    }\r\n}\r\n", "import { Component, OnInit, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Router } from '@angular/router';\r\nimport { CodeTypeSettingService } from '../../core/services/code-type-setting.service';\r\nimport { CodeGeneratorService } from '../../core/services/code-generator.service';\r\nimport { forkJoin } from 'rxjs';\r\n\r\ninterface SettingDisplay {\r\n    id?: number;\r\n    code: string;\r\n    sortOrder: number;\r\n    separator: string;\r\n    isRequired: boolean;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-code-settings',\r\n    standalone: true,\r\n    imports: [CommonModule],\r\n    templateUrl: './code-settings.component.html',\r\n    styleUrl: './code-settings.component.css'\r\n})\r\nexport class CodeSettingsComponent implements OnInit {\r\n    isLoading = false;\r\n    errorMessage = '';\r\n    successMessage = '';\r\n\r\n    settings = signal<SettingDisplay[]>([]);\r\n    generatedPattern = signal('');\r\n\r\n    codeTypeId!: number;\r\n    detailIds: number[] = [];\r\n    savedCodes: string[] = [];\r\n\r\n    constructor(\r\n        private codeTypeSettingService: CodeTypeSettingService,\r\n        private codeGeneratorService: CodeGeneratorService,\r\n        private router: Router\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        const state = this.codeGeneratorService.getState();\r\n        this.codeTypeId = state.codeTypeId!;\r\n        this.detailIds = state.codeAttributeDetailIds;\r\n\r\n        if (!this.codeTypeId || this.detailIds.length !== 3) {\r\n            this.errorMessage = 'Missing required data. Please complete previous steps.';\r\n            return;\r\n        }\r\n\r\n        // Get saved codes from localStorage or from previous component\r\n        // In a real app, you'd fetch these from the API based on detail IDs\r\n        // For now, we'll use the codes that were saved during Code Details step\r\n        this.savedCodes = this.getSavedCodesFromDetails();\r\n\r\n        this.createSettings();\r\n    }\r\n\r\n    getSavedCodesFromDetails(): string[] {\r\n        // In production, fetch from API using detailIds\r\n        // For now, return placeholder codes in order\r\n        // You would call an API endpoint like: GET /CodeAttributeDetails/{id}\r\n        return ['XYZ', 'ABC', 'VBV'];\r\n    }\r\n\r\n    createSettings() {\r\n        this.isLoading = true;\r\n        const settingRequests = this.detailIds.map((detailId, index) => {\r\n            return this.codeTypeSettingService.createCodeTypeSetting({\r\n                codeTypeId: this.codeTypeId,\r\n                attributeDetailId: detailId,\r\n                sortOrder: index + 1,\r\n                separator: '-',\r\n                isRequired: true\r\n            });\r\n        });\r\n\r\n        forkJoin(settingRequests).subscribe({\r\n            next: (responses) => {\r\n                const settingsData: SettingDisplay[] = responses.map((r, i) => ({\r\n                    id: r.data.id,\r\n                    code: this.savedCodes[i],\r\n                    sortOrder: r.data.sortOrder,\r\n                    separator: r.data.separator,\r\n                    isRequired: r.data.isRequired\r\n                }));\r\n\r\n                this.settings.set(settingsData);\r\n                this.generatedPattern.set(this.savedCodes.join('-'));\r\n                this.isLoading = false;\r\n                this.successMessage = 'Settings created successfully!';\r\n            },\r\n            error: (error) => {\r\n                this.isLoading = false;\r\n                this.errorMessage = error.error?.message || 'Failed to create settings. Please try again.';\r\n            }\r\n        });\r\n    }\r\n\r\n    onSave() {\r\n        this.codeGeneratorService.completeStep(4);\r\n        this.router.navigate(['/code-sequence']);\r\n    }\r\n}\r\n", "<div class=\"code-settings-container\">\r\n    <div class=\"header\">\r\n        <h2>Code Settings</h2>\r\n        <p class=\"description\">Review and confirm code structure settings</p>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n        <div class=\"card\">\r\n            <h3>Settings Configuration</h3>\r\n            <p>The following settings have been auto-configured based on your details.</p>\r\n\r\n            @if (successMessage) {\r\n            <div class=\"alert alert-success\">{{ successMessage }}</div>\r\n            }\r\n\r\n            @if (errorMessage) {\r\n            <div class=\"alert alert-error\">{{ errorMessage }}</div>\r\n            }\r\n\r\n            @if (isLoading) {\r\n            <div class=\"loading-container\">\r\n                <div class=\"spinner-large\"></div>\r\n                <p>Creating settings...</p>\r\n            </div>\r\n            }\r\n\r\n            @if (!isLoading && settings().length > 0) {\r\n            <div class=\"settings-display\">\r\n                @for (setting of settings(); track setting.id) {\r\n                <div class=\"setting-row\">\r\n                    <div class=\"setting-field\">\r\n                        <label>Code</label>\r\n                        <input type=\"text\" [value]=\"setting.code\" readonly class=\"readonly-input\" />\r\n                    </div>\r\n                    <div class=\"setting-field\">\r\n                        <label>Sort Order</label>\r\n                        <input type=\"number\" [value]=\"setting.sortOrder\" readonly class=\"readonly-input\" />\r\n                    </div>\r\n                    <div class=\"setting-field\">\r\n                        <label>Separator</label>\r\n                        <input type=\"text\" [value]=\"setting.separator\" readonly class=\"readonly-input\" />\r\n                    </div>\r\n                    <div class=\"setting-field\">\r\n                        <label>Required</label>\r\n                        <input type=\"text\" [value]=\"setting.isRequired ? 'Yes' : 'No'\" readonly\r\n                            class=\"readonly-input\" />\r\n                    </div>\r\n                </div>\r\n                }\r\n            </div>\r\n\r\n            <div class=\"pattern-preview\">\r\n                <h4>Generated Code Pattern</h4>\r\n                <div class=\"pattern-display\">\r\n                    {{ generatedPattern() }}\r\n                </div>\r\n                <p class=\"pattern-description\">\r\n                    This is the pattern that will be used for code generation\r\n                </p>\r\n            </div>\r\n\r\n            <div class=\"form-actions\">\r\n                <button class=\"btn btn-primary\" (click)=\"onSave()\">\r\n                    Continue to Sequence\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <path d=\"M5 12h14M12 5l7 7-7 7\" />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            }\r\n        </div>\r\n    </div>\r\n</div>"],
  "mappings": "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",
  "names": []
}
