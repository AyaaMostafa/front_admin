<aside class="sidebar" [class.collapsed]="isCollapsed">

    <!-- ── Brand Header ──────────────────────────────── -->
    <div class="sidebar-header">
        <a routerLink="/dashboard" class="sidebar-brand">
            <img src="img/brand/favicon.png" alt="Logo" class="sidebar-logo-img" />
            @if (!isCollapsed) {
            <span class="sidebar-brand-name">MDM</span>
            }
        </a>
    </div>

    <!-- ── Navigation ───────────────────────────────── -->
    <nav class="sidebar-nav">
        <div class="nav-wrapper">
            @for (section of menuItems(); track section.label) {
            <div class="nav-section">

                @if (!isCollapsed && section.label) {
                <div class="nav-section-label">{{ section.label }}</div>
                }

                @if (section.children) {
                @for (item of section.children; track item.label) {
                <div class="nav-item-wrap">

                    <!-- Main item -->
                    <a [routerLink]="item.route && !item.children ? item.route : null" routerLinkActive="active"
                        [routerLinkActiveOptions]="{ exact: false }" class="nav-item"
                        [class.has-children]="item.children && item.children.length > 0"
                        [title]="isCollapsed ? item.label : ''" (click)="item.children ? toggleMenuItem(item) : null">

                        @if (item.icon) {
                        <svg class="nav-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path [attr.d]="getIcon(item.icon)"></path>
                        </svg>
                        } @else {
                        <span class="nav-icon-dot"></span>
                        }

                        @if (!isCollapsed) {
                        <span class="nav-label">{{ item.label }}</span>

                        @if (item.badge) {
                        <span class="nav-badge">{{ item.badge }}</span>
                        }

                        @if (item.children && item.children.length > 0) {
                        <svg class="nav-arrow" [class.expanded]="item.expanded" width="14" height="14"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        }
                        }
                    </a>

                    <!-- Sub-items -->
                    @if (item.children && item.children.length > 0 && item.expanded && !isCollapsed) {
                    <div class="sub-menu">
                        @for (subItem of item.children; track subItem.label) {
                        <a [routerLink]="subItem.route || null" routerLinkActive="active" class="sub-item">
                            <span class="sub-dot"></span>
                            <span class="sub-label">{{ subItem.label }}</span>
                        </a>
                        }
                    </div>
                    }

                </div>
                }
                }

            </div>
            }
        </div>
    </nav>

    <!-- ── Footer ───────────────────────────────────── -->
    @if (!isCollapsed) {
    <div class="sidebar-footer">
        <div class="sf-inner">
            <span class="sf-label">Version</span>
            <span class="sf-value">1.0.0</span>
        </div>
    </div>
    }

</aside>